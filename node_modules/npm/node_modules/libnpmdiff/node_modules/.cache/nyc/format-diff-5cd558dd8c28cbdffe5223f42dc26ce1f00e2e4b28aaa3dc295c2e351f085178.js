function cov_20qosbwvn4(){var path="/Users/ruyadorno/Documents/workspace/cli/main/packages/libnpmdiff/lib/format-diff.js";var hash="74565c3406330111729013f7936bd0b58719fa2c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ruyadorno/Documents/workspace/cli/main/packages/libnpmdiff/lib/format-diff.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:16}},"1":{start:{line:3,column:21},end:{line:3,column:56}},"2":{start:{line:4,column:15},end:{line:4,column:30}},"3":{start:{line:6,column:25},end:{line:6,column:59}},"4":{start:{line:8,column:19},end:{line:92,column:1}},"5":{start:{line:9,column:12},end:{line:9,column:14}},"6":{start:{line:10,column:20},end:{line:10,column:71}},"7":{start:{line:11,column:20},end:{line:11,column:71}},"8":{start:{line:13,column:2},end:{line:89,column:3}},"9":{start:{line:14,column:18},end:{line:17,column:5}},"10":{start:{line:19,column:19},end:{line:19,column:21}},"11":{start:{line:20,column:22},end:{line:23,column:5}},"12":{start:{line:24,column:21},end:{line:27,column:5}},"13":{start:{line:28,column:18},end:{line:31,column:5}},"14":{start:{line:33,column:4},end:{line:34,column:14}},"15":{start:{line:34,column:6},end:{line:34,column:14}},"16":{start:{line:36,column:4},end:{line:39,column:5}},"17":{start:{line:37,column:6},end:{line:37,column:32}},"18":{start:{line:38,column:6},end:{line:38,column:14}},"19":{start:{line:41,column:16},end:{line:41,column:18}},"20":{start:{line:42,column:23},end:{line:42,column:24}},"21":{start:{line:43,column:19},end:{line:46,column:5}},"22":{start:{line:44,column:6},end:{line:44,column:20}},"23":{start:{line:45,column:6},end:{line:45,column:29}},"24":{start:{line:49,column:4},end:{line:49,column:46}},"25":{start:{line:50,column:4},end:{line:61,column:5}},"26":{start:{line:51,column:6},end:{line:51,column:33}},"27":{start:{line:53,column:6},end:{line:60,column:7}},"28":{start:{line:54,column:8},end:{line:54,column:46}},"29":{start:{line:55,column:11},end:{line:60,column:7}},"30":{start:{line:56,column:8},end:{line:56,column:42}},"31":{start:{line:58,column:8},end:{line:58,column:37}},"32":{start:{line:59,column:8},end:{line:59,column:37}},"33":{start:{line:62,column:4},end:{line:62,column:122}},"34":{start:{line:64,column:4},end:{line:84,column:5}},"35":{start:{line:65,column:6},end:{line:79,column:30}},"36":{start:{line:80,column:6},end:{line:80,column:23}},"37":{start:{line:82,column:6},end:{line:82,column:30}},"38":{start:{line:83,column:6},end:{line:83,column:30}},"39":{start:{line:86,column:4},end:{line:88,column:14}},"40":{start:{line:91,column:2},end:{line:91,column:19}},"41":{start:{line:94,column:0},end:{line:94,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:19},end:{line:8,column:20}},loc:{start:{line:8,column:61},end:{line:92,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:43,column:19},end:{line:43,column:20}},loc:{start:{line:43,column:26},end:{line:46,column:5}},line:43}},branchMap:{"0":{loc:{start:{line:8,column:29},end:{line:8,column:38}},type:"default-arg",locations:[{start:{line:8,column:36},end:{line:8,column:38}}],line:8},"1":{loc:{start:{line:10,column:20},end:{line:10,column:71}},type:"cond-expr",locations:[{start:{line:10,column:40},end:{line:10,column:42}},{start:{line:10,column:45},end:{line:10,column:71}}],line:10},"2":{loc:{start:{line:10,column:45},end:{line:10,column:71}},type:"binary-expr",locations:[{start:{line:10,column:45},end:{line:10,column:63}},{start:{line:10,column:67},end:{line:10,column:71}}],line:10},"3":{loc:{start:{line:11,column:20},end:{line:11,column:71}},type:"cond-expr",locations:[{start:{line:11,column:40},end:{line:11,column:42}},{start:{line:11,column:45},end:{line:11,column:71}}],line:11},"4":{loc:{start:{line:11,column:45},end:{line:11,column:71}},type:"binary-expr",locations:[{start:{line:11,column:45},end:{line:11,column:63}},{start:{line:11,column:67},end:{line:11,column:71}}],line:11},"5":{loc:{start:{line:25,column:9},end:{line:25,column:43}},type:"binary-expr",locations:[{start:{line:25,column:9},end:{line:25,column:20}},{start:{line:25,column:24},end:{line:25,column:43}}],line:25},"6":{loc:{start:{line:26,column:9},end:{line:26,column:43}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:20}},{start:{line:26,column:24},end:{line:26,column:43}}],line:26},"7":{loc:{start:{line:29,column:9},end:{line:29,column:40}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:20}},{start:{line:29,column:24},end:{line:29,column:40}}],line:29},"8":{loc:{start:{line:30,column:9},end:{line:30,column:40}},type:"binary-expr",locations:[{start:{line:30,column:9},end:{line:30,column:20}},{start:{line:30,column:24},end:{line:30,column:40}}],line:30},"9":{loc:{start:{line:33,column:4},end:{line:34,column:14}},type:"if",locations:[{start:{line:33,column:4},end:{line:34,column:14}},{start:{line:33,column:4},end:{line:34,column:14}}],line:33},"10":{loc:{start:{line:33,column:8},end:{line:33,column:56}},type:"binary-expr",locations:[{start:{line:33,column:8},end:{line:33,column:33}},{start:{line:33,column:37},end:{line:33,column:56}}],line:33},"11":{loc:{start:{line:36,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:39,column:5}},{start:{line:36,column:4},end:{line:39,column:5}}],line:36},"12":{loc:{start:{line:50,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:61,column:5}},{start:{line:50,column:4},end:{line:61,column:5}}],line:50},"13":{loc:{start:{line:53,column:6},end:{line:60,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:60,column:7}},{start:{line:53,column:6},end:{line:60,column:7}}],line:53},"14":{loc:{start:{line:53,column:10},end:{line:53,column:29}},type:"binary-expr",locations:[{start:{line:53,column:10},end:{line:53,column:17}},{start:{line:53,column:21},end:{line:53,column:29}}],line:53},"15":{loc:{start:{line:55,column:11},end:{line:60,column:7}},type:"if",locations:[{start:{line:55,column:11},end:{line:60,column:7}},{start:{line:55,column:11},end:{line:60,column:7}}],line:55},"16":{loc:{start:{line:55,column:15},end:{line:55,column:34}},type:"binary-expr",locations:[{start:{line:55,column:15},end:{line:55,column:23}},{start:{line:55,column:27},end:{line:55,column:34}}],line:55},"17":{loc:{start:{line:62,column:20},end:{line:62,column:48}},type:"binary-expr",locations:[{start:{line:62,column:20},end:{line:62,column:41}},{start:{line:62,column:45},end:{line:62,column:48}}],line:62},"18":{loc:{start:{line:62,column:66},end:{line:62,column:94}},type:"binary-expr",locations:[{start:{line:62,column:66},end:{line:62,column:87}},{start:{line:62,column:91},end:{line:62,column:94}}],line:62},"19":{loc:{start:{line:64,column:4},end:{line:84,column:5}},type:"if",locations:[{start:{line:64,column:4},end:{line:84,column:5}},{start:{line:64,column:4},end:{line:84,column:5}}],line:64},"20":{loc:{start:{line:68,column:8},end:{line:68,column:24}},type:"binary-expr",locations:[{start:{line:68,column:8},end:{line:68,column:18}},{start:{line:68,column:22},end:{line:68,column:24}}],line:68},"21":{loc:{start:{line:69,column:8},end:{line:69,column:24}},type:"binary-expr",locations:[{start:{line:69,column:8},end:{line:69,column:18}},{start:{line:69,column:22},end:{line:69,column:24}}],line:69},"22":{loc:{start:{line:73,column:19},end:{line:73,column:69}},type:"cond-expr",locations:[{start:{line:73,column:44},end:{line:73,column:45}},{start:{line:73,column:48},end:{line:73,column:69}}],line:73},"23":{loc:{start:{line:73,column:48},end:{line:73,column:69}},type:"binary-expr",locations:[{start:{line:73,column:48},end:{line:73,column:64}},{start:{line:73,column:68},end:{line:73,column:69}}],line:73},"24":{loc:{start:{line:86,column:12},end:{line:88,column:13}},type:"cond-expr",locations:[{start:{line:87,column:8},end:{line:87,column:45}},{start:{line:88,column:8},end:{line:88,column:13}}],line:86}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},f:{"0":0,"1":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"74565c3406330111729013f7936bd0b58719fa2c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_20qosbwvn4=function(){return actualCoverage;};}return actualCoverage;}cov_20qosbwvn4();const EOL=(cov_20qosbwvn4().s[0]++,'\n');const colorizeDiff=(cov_20qosbwvn4().s[1]++,require('@npmcli/disparity-colors'));const jsDiff=(cov_20qosbwvn4().s[2]++,require('diff'));const shouldPrintPatch=(cov_20qosbwvn4().s[3]++,require('./should-print-patch.js'));cov_20qosbwvn4().s[4]++;const formatDiff=({files,opts=(cov_20qosbwvn4().b[0][0]++,{}),refs,versions})=>{cov_20qosbwvn4().f[0]++;let res=(cov_20qosbwvn4().s[5]++,'');const srcPrefix=(cov_20qosbwvn4().s[6]++,opts.diffNoPrefix?(cov_20qosbwvn4().b[1][0]++,''):(cov_20qosbwvn4().b[1][1]++,(cov_20qosbwvn4().b[2][0]++,opts.diffSrcPrefix)||(cov_20qosbwvn4().b[2][1]++,'a/')));const dstPrefix=(cov_20qosbwvn4().s[7]++,opts.diffNoPrefix?(cov_20qosbwvn4().b[3][0]++,''):(cov_20qosbwvn4().b[3][1]++,(cov_20qosbwvn4().b[4][0]++,opts.diffDstPrefix)||(cov_20qosbwvn4().b[4][1]++,'b/')));cov_20qosbwvn4().s[8]++;for(const filename of files.values()){const names=(cov_20qosbwvn4().s[9]++,{a:`${srcPrefix}${filename}`,b:`${dstPrefix}${filename}`});let fileMode=(cov_20qosbwvn4().s[10]++,'');const filenames=(cov_20qosbwvn4().s[11]++,{a:refs.get(`a/${filename}`),b:refs.get(`b/${filename}`)});const contents=(cov_20qosbwvn4().s[12]++,{a:(cov_20qosbwvn4().b[5][0]++,filenames.a)&&(cov_20qosbwvn4().b[5][1]++,filenames.a.content),b:(cov_20qosbwvn4().b[6][0]++,filenames.b)&&(cov_20qosbwvn4().b[6][1]++,filenames.b.content)});const modes=(cov_20qosbwvn4().s[13]++,{a:(cov_20qosbwvn4().b[7][0]++,filenames.a)&&(cov_20qosbwvn4().b[7][1]++,filenames.a.mode),b:(cov_20qosbwvn4().b[8][0]++,filenames.b)&&(cov_20qosbwvn4().b[8][1]++,filenames.b.mode)});cov_20qosbwvn4().s[14]++;if((cov_20qosbwvn4().b[10][0]++,contents.a===contents.b)&&(cov_20qosbwvn4().b[10][1]++,modes.a===modes.b)){cov_20qosbwvn4().b[9][0]++;cov_20qosbwvn4().s[15]++;continue;}else{cov_20qosbwvn4().b[9][1]++;}cov_20qosbwvn4().s[16]++;if(opts.diffNameOnly){cov_20qosbwvn4().b[11][0]++;cov_20qosbwvn4().s[17]++;res+=`${filename}${EOL}`;cov_20qosbwvn4().s[18]++;continue;}else{cov_20qosbwvn4().b[11][1]++;}let patch=(cov_20qosbwvn4().s[19]++,'');let headerLength=(cov_20qosbwvn4().s[20]++,0);cov_20qosbwvn4().s[21]++;const header=str=>{cov_20qosbwvn4().f[1]++;cov_20qosbwvn4().s[22]++;headerLength++;cov_20qosbwvn4().s[23]++;patch+=`${str}${EOL}`;};// manually build a git diff-compatible header
cov_20qosbwvn4().s[24]++;header(`diff --git ${names.a} ${names.b}`);cov_20qosbwvn4().s[25]++;if(modes.a===modes.b){cov_20qosbwvn4().b[12][0]++;cov_20qosbwvn4().s[26]++;fileMode=filenames.a.mode;}else{cov_20qosbwvn4().b[12][1]++;cov_20qosbwvn4().s[27]++;if((cov_20qosbwvn4().b[14][0]++,modes.a)&&(cov_20qosbwvn4().b[14][1]++,!modes.b)){cov_20qosbwvn4().b[13][0]++;cov_20qosbwvn4().s[28]++;header(`deleted file mode ${modes.a}`);}else{cov_20qosbwvn4().b[13][1]++;cov_20qosbwvn4().s[29]++;if((cov_20qosbwvn4().b[16][0]++,!modes.a)&&(cov_20qosbwvn4().b[16][1]++,modes.b)){cov_20qosbwvn4().b[15][0]++;cov_20qosbwvn4().s[30]++;header(`new file mode ${modes.b}`);}else{cov_20qosbwvn4().b[15][1]++;cov_20qosbwvn4().s[31]++;header(`old mode ${modes.a}`);cov_20qosbwvn4().s[32]++;header(`new mode ${modes.b}`);}}}cov_20qosbwvn4().s[33]++;header(`index ${(cov_20qosbwvn4().b[17][0]++,opts.tagVersionPrefix)||(cov_20qosbwvn4().b[17][1]++,'v')}${versions.a}..${(cov_20qosbwvn4().b[18][0]++,opts.tagVersionPrefix)||(cov_20qosbwvn4().b[18][1]++,'v')}${versions.b} ${fileMode}`);cov_20qosbwvn4().s[34]++;if(shouldPrintPatch(filename)){cov_20qosbwvn4().b[19][0]++;cov_20qosbwvn4().s[35]++;patch+=jsDiff.createTwoFilesPatch(names.a,names.b,(cov_20qosbwvn4().b[20][0]++,contents.a)||(cov_20qosbwvn4().b[20][1]++,''),(cov_20qosbwvn4().b[21][0]++,contents.b)||(cov_20qosbwvn4().b[21][1]++,''),'','',{context:opts.diffUnified===0?(cov_20qosbwvn4().b[22][0]++,0):(cov_20qosbwvn4().b[22][1]++,(cov_20qosbwvn4().b[23][0]++,opts.diffUnified)||(cov_20qosbwvn4().b[23][1]++,3)),ignoreWhitespace:opts.diffIgnoreAllSpace}).replace('===================================================================\n','').replace(/\t\n/g,'\n');// strip trailing tabs
cov_20qosbwvn4().s[36]++;headerLength+=2;}else{cov_20qosbwvn4().b[19][1]++;cov_20qosbwvn4().s[37]++;header(`--- ${names.a}`);cov_20qosbwvn4().s[38]++;header(`+++ ${names.b}`);}cov_20qosbwvn4().s[39]++;res+=opts.color?(cov_20qosbwvn4().b[24][0]++,colorizeDiff(patch,{headerLength})):(cov_20qosbwvn4().b[24][1]++,patch);}cov_20qosbwvn4().s[40]++;return res.trim();};cov_20qosbwvn4().s[41]++;module.exports=formatDiff;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1hdC1kaWZmLmpzIl0sIm5hbWVzIjpbIkVPTCIsImNvbG9yaXplRGlmZiIsInJlcXVpcmUiLCJqc0RpZmYiLCJzaG91bGRQcmludFBhdGNoIiwiZm9ybWF0RGlmZiIsImZpbGVzIiwib3B0cyIsInJlZnMiLCJ2ZXJzaW9ucyIsInJlcyIsInNyY1ByZWZpeCIsImRpZmZOb1ByZWZpeCIsImRpZmZTcmNQcmVmaXgiLCJkc3RQcmVmaXgiLCJkaWZmRHN0UHJlZml4IiwiZmlsZW5hbWUiLCJ2YWx1ZXMiLCJuYW1lcyIsImEiLCJiIiwiZmlsZU1vZGUiLCJmaWxlbmFtZXMiLCJnZXQiLCJjb250ZW50cyIsImNvbnRlbnQiLCJtb2RlcyIsIm1vZGUiLCJkaWZmTmFtZU9ubHkiLCJwYXRjaCIsImhlYWRlckxlbmd0aCIsImhlYWRlciIsInN0ciIsInRhZ1ZlcnNpb25QcmVmaXgiLCJjcmVhdGVUd29GaWxlc1BhdGNoIiwiY29udGV4dCIsImRpZmZVbmlmaWVkIiwiaWdub3JlV2hpdGVzcGFjZSIsImRpZmZJZ25vcmVBbGxTcGFjZSIsInJlcGxhY2UiLCJjb2xvciIsInRyaW0iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoibW5SQWVZOzJGQWZaLEtBQU1BLENBQUFBLEdBQUcsMEJBQUcsSUFBSCxDQUFULENBRUEsS0FBTUMsQ0FBQUEsWUFBWSwwQkFBR0MsT0FBTyxDQUFDLDBCQUFELENBQVYsQ0FBbEIsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFWLENBQVosQ0FFQSxLQUFNRSxDQUFBQSxnQkFBZ0IsMEJBQUdGLE9BQU8sQ0FBQyx5QkFBRCxDQUFWLENBQXRCLEMsd0JBRUEsS0FBTUcsQ0FBQUEsVUFBVSxDQUFHLENBQUMsQ0FBRUMsS0FBRixDQUFTQyxJQUFJLDZCQUFHLEVBQUgsQ0FBYixDQUFvQkMsSUFBcEIsQ0FBMEJDLFFBQTFCLENBQUQsR0FBMEMseUJBQzNELEdBQUlDLENBQUFBLEdBQUcsMEJB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T0FYTyxDQVlQLHVFQVpPLENBYVAsRUFiTyxFQWNQQSxPQWRPLENBY0MsT0FkRCxDQWNVLElBZFYsQ0FBVCxDQWN5QjtBQWZLLHlCQWdCOUJULFlBQVksRUFBSSxDQUFoQixDQUNELENBakJELElBaUJPLHNEQUNMQyxNQUFNLENBQUUsT0FBTWIsS0FBSyxDQUFDQyxDQUFFLEVBQWhCLENBQU4sQ0FESyx5QkFFTFksTUFBTSxDQUFFLE9BQU1iLEtBQUssQ0FBQ0UsQ0FBRSxFQUFoQixDQUFOLENBQ0QsQ0F2RW9DLHlCQXlFckNWLEdBQUcsRUFBS0gsSUFBSSxDQUFDaUMsS0FBTCw4QkFDSnZDLFlBQVksQ0FBQzRCLEtBQUQsQ0FBUSxDQUFFQyxZQUFGLENBQVIsQ0FEUiwrQkFFSkQsS0FGSSxDQUFSLENBR0QsQ0FqRjBELHlCQW1GM0QsTUFBT25CLENBQUFBLEdBQUcsQ0FBQytCLElBQUosRUFBUCxDQUNELENBcEZELEMseUJBc0ZBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJ0QyxVQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVPTCA9ICdcXG4nXG5cbmNvbnN0IGNvbG9yaXplRGlmZiA9IHJlcXVpcmUoJ0BucG1jbGkvZGlzcGFyaXR5LWNvbG9ycycpXG5jb25zdCBqc0RpZmYgPSByZXF1aXJlKCdkaWZmJylcblxuY29uc3Qgc2hvdWxkUHJpbnRQYXRjaCA9IHJlcXVpcmUoJy4vc2hvdWxkLXByaW50LXBhdGNoLmpzJylcblxuY29uc3QgZm9ybWF0RGlmZiA9ICh7IGZpbGVzLCBvcHRzID0ge30sIHJlZnMsIHZlcnNpb25zIH0pID0+IHtcbiAgbGV0IHJlcyA9ICcnXG4gIGNvbnN0IHNyY1ByZWZpeCA9IG9wdHMuZGlmZk5vUHJlZml4ID8gJycgOiBvcHRzLmRpZmZTcmNQcmVmaXggfHwgJ2EvJ1xuICBjb25zdCBkc3RQcmVmaXggPSBvcHRzLmRpZmZOb1ByZWZpeCA/ICcnIDogb3B0cy5kaWZmRHN0UHJlZml4IHx8ICdiLydcblxuICBmb3IgKGNvbnN0IGZpbGVuYW1lIG9mIGZpbGVzLnZhbHVlcygpKSB7XG4gICAgY29uc3QgbmFtZXMgPSB7XG4gICAgICBhOiBgJHtzcmNQcmVmaXh9JHtmaWxlbmFtZX1gLFxuICAgICAgYjogYCR7ZHN0UHJlZml4fSR7ZmlsZW5hbWV9YCxcbiAgICB9XG5cbiAgICBsZXQgZmlsZU1vZGUgPSAnJ1xuICAgIGNvbnN0IGZpbGVuYW1lcyA9IHtcbiAgICAgIGE6IHJlZnMuZ2V0KGBhLyR7ZmlsZW5hbWV9YCksXG4gICAgICBiOiByZWZzLmdldChgYi8ke2ZpbGVuYW1lfWApLFxuICAgIH1cbiAgICBjb25zdCBjb250ZW50cyA9IHtcbiAgICAgIGE6IGZpbGVuYW1lcy5hICYmIGZpbGVuYW1lcy5hLmNvbnRlbnQsXG4gICAgICBiOiBmaWxlbmFtZXMuYiAmJiBmaWxlbmFtZXMuYi5jb250ZW50LFxuICAgIH1cbiAgICBjb25zdCBtb2RlcyA9IHtcbiAgICAgIGE6IGZpbGVuYW1lcy5hICYmIGZpbGVuYW1lcy5hLm1vZGUsXG4gICAgICBiOiBmaWxlbmFtZXMuYiAmJiBmaWxlbmFtZXMuYi5tb2RlLFxuICAgIH1cblxuICAgIGlmIChjb250ZW50cy5hID09PSBjb250ZW50cy5iICYmIG1vZGVzLmEgPT09IG1vZGVzLmIpXG4gICAgICBjb250aW51ZVxuXG4gICAgaWYgKG9wdHMuZGlmZk5hbWVPbmx5KSB7XG4gICAgICByZXMgKz0gYCR7ZmlsZW5hbWV9JHtFT0x9YFxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBsZXQgcGF0Y2ggPSAnJ1xuICAgIGxldCBoZWFkZXJMZW5ndGggPSAwXG4gICAgY29uc3QgaGVhZGVyID0gc3RyID0+IHtcbiAgICAgIGhlYWRlckxlbmd0aCsrXG4gICAgICBwYXRjaCArPSBgJHtzdHJ9JHtFT0x9YFxuICAgIH1cblxuICAgIC8vIG1hbnVhbGx5IGJ1aWxkIGEgZ2l0IGRpZmYtY29tcGF0aWJsZSBoZWFkZXJcbiAgICBoZWFkZXIoYGRpZmYgLS1naXQgJHtuYW1lcy5hfSAke25hbWVzLmJ9YClcbiAgICBpZiAobW9kZXMuYSA9PT0gbW9kZXMuYilcbiAgICAgIGZpbGVNb2RlID0gZmlsZW5hbWVzLmEubW9kZVxuICAgIGVsc2Uge1xuICAgICAgaWYgKG1vZGVzLmEgJiYgIW1vZGVzLmIpXG4gICAgICAgIGhlYWRlcihgZGVsZXRlZCBmaWxlIG1vZGUgJHttb2Rlcy5hfWApXG4gICAgICBlbHNlIGlmICghbW9kZXMuYSAmJiBtb2Rlcy5iKVxuICAgICAgICBoZWFkZXIoYG5ldyBmaWxlIG1vZGUgJHttb2Rlcy5ifWApXG4gICAgICBlbHNlIHtcbiAgICAgICAgaGVhZGVyKGBvbGQgbW9kZSAke21vZGVzLmF9YClcbiAgICAgICAgaGVhZGVyKGBuZXcgbW9kZSAke21vZGVzLmJ9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaGVhZGVyKGBpbmRleCAke29wdHMudGFnVmVyc2lvblByZWZpeCB8fCAndid9JHt2ZXJzaW9ucy5hfS4uJHtvcHRzLnRhZ1ZlcnNpb25QcmVmaXggfHwgJ3YnfSR7dmVyc2lvbnMuYn0gJHtmaWxlTW9kZX1gKVxuXG4gICAgaWYgKHNob3VsZFByaW50UGF0Y2goZmlsZW5hbWUpKSB7XG4gICAgICBwYXRjaCArPSBqc0RpZmYuY3JlYXRlVHdvRmlsZXNQYXRjaChcbiAgICAgICAgbmFtZXMuYSxcbiAgICAgICAgbmFtZXMuYixcbiAgICAgICAgY29udGVudHMuYSB8fCAnJyxcbiAgICAgICAgY29udGVudHMuYiB8fCAnJyxcbiAgICAgICAgJycsXG4gICAgICAgICcnLFxuICAgICAgICB7XG4gICAgICAgICAgY29udGV4dDogb3B0cy5kaWZmVW5pZmllZCA9PT0gMCA/IDAgOiBvcHRzLmRpZmZVbmlmaWVkIHx8IDMsXG4gICAgICAgICAgaWdub3JlV2hpdGVzcGFjZTogb3B0cy5kaWZmSWdub3JlQWxsU3BhY2UsXG4gICAgICAgIH1cbiAgICAgICkucmVwbGFjZShcbiAgICAgICAgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4nLFxuICAgICAgICAnJ1xuICAgICAgKS5yZXBsYWNlKC9cXHRcXG4vZywgJ1xcbicpIC8vIHN0cmlwIHRyYWlsaW5nIHRhYnNcbiAgICAgIGhlYWRlckxlbmd0aCArPSAyXG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlcihgLS0tICR7bmFtZXMuYX1gKVxuICAgICAgaGVhZGVyKGArKysgJHtuYW1lcy5ifWApXG4gICAgfVxuXG4gICAgcmVzICs9IChvcHRzLmNvbG9yXG4gICAgICA/IGNvbG9yaXplRGlmZihwYXRjaCwgeyBoZWFkZXJMZW5ndGggfSlcbiAgICAgIDogcGF0Y2gpXG4gIH1cblxuICByZXR1cm4gcmVzLnRyaW0oKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZvcm1hdERpZmZcbiJdfQ==