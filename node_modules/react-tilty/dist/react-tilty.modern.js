import e,{useState as t,useRef as n,useEffect as r,useLayoutEffect as i,useCallback as o}from"react";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c({style:c={},className:s="",reverse:l=!1,max:u=35,perspective:d=1e3,easing:f="cubic-bezier(.03,.98,.52,.99)",scale:g=1,speed:m=300,axis:p="",reset:w=!0,glare:v=!1,maxGlare:h=1,glareStyle:y={},gyroscope:M=!0,gyroscopeMinAngleX:E=-45,gyroscopeMaxAngleX:x=45,gyroscopeMinAngleY:b=-45,gyroscopeMaxAngleY:Y=45,onMouseEnter:A=(()=>{}),onMouseMove:X=(()=>{}),onMouseLeave:$=(()=>{}),onTiltChange:F=(()=>{}),children:L}){const[C,W]=t({position:"relative",willChange:"transform"}),[N,O]=t({position:"absolute",top:"50%",left:"50%",pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)",transformOrigin:"0% 0%",opacity:"0"}),T=n(0),q=n(0),z=n(0),j=n(0),I=n(null),P=n(null),k=l?1:-1,B=n(null);r(()=>()=>{clearTimeout(I.current),"undefined"!=typeof window&&window.cancelAnimationFrame(P.current)},[]),r(()=>{if(!v||"undefined"==typeof window)return()=>{};const e=()=>{O(e=>a({},e,{width:2*B.current.offsetWidth,height:2*B.current.offsetWidth}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[v]),i(()=>{O(e=>a({},e,{width:2*B.current.offsetWidth,height:2*B.current.offsetWidth}))},[]);const G=()=>{const e=B.current.getBoundingClientRect();T.current=B.current.offsetWidth,q.current=B.current.offsetHeight,z.current=e.left,j.current=e.top},H=o(e=>{let t=(e.nativeEvent.clientX-z.current)/T.current,n=(e.nativeEvent.clientY-j.current)/q.current;return t=Math.min(Math.max(t,0),1),n=Math.min(Math.max(n,0),1),{tiltX:(k*(u/2-t*u)).toFixed(2),tiltY:(k*(n*u-u/2)).toFixed(2),percentageX:100*t,percentageY:100*n,angle:Math.atan2(e.nativeEvent.clientX-(z.current+T.current/2),-(e.nativeEvent.clientY-(j.current+q.current/2)))*(180/Math.PI)}},[u,k]),R=o(e=>{const t=H(e);W(e=>a({},e,{transform:`perspective(${d}px) rotateX(${"x"===p.toLowerCase()?0:t.tiltY}deg) rotateY(${"y"===p.toLowerCase()?0:t.tiltX}deg) scale3d(${g}, ${g}, ${g})`})),v&&O(e=>a({},e,{transform:`rotate(${t.angle}deg) translate(-50%, -50%)`,opacity:t.percentageY*h/100})),B.current.dispatchEvent(new CustomEvent("tiltChange",{detail:t})),F({detail:t}),P.current=null},[p,H,v,h,d,g,F]),S=()=>{clearTimeout(I.current),W(e=>a({},e,{transition:`${m}ms ${f}`})),I.current=setTimeout(()=>{W(e=>a({},e,{transition:""}))},m)};return r(()=>{if(!M)return()=>{};const e=e=>{if(null===e.gamma||null===e.beta||"undefined"==typeof window)return;G();const t=(e.gamma-E)/((x-E)/T.current),n=(e.beta-b)/((Y-b)/q.current);null!==P.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(P.current),e.nativeEvent={clientX:t+z.current,clientY:n+j.current},P.current=requestAnimationFrame(()=>R(e))};return window.addEventListener("deviceorientation",e),()=>{window.removeEventListener("deviceorientation",e)}},[M,x,Y,E,b,R]),e.createElement("div",{ref:B,style:a({},c,C),className:s,onMouseEnter:e=>(G(),S(),A(e)),onMouseMove:e=>(e.persist(),null!==P.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(P.current),P.current=requestAnimationFrame(()=>R(e)),X(e)),onMouseLeave:e=>(S(),w&&"undefined"!=typeof window&&window.requestAnimationFrame(()=>{W(e=>a({},e,{transform:`perspective(${d}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})),v&&O(e=>a({},e,{transform:"rotate(180deg) translate(-50%, -50%)",opacity:0}))}),$(e))},v&&e.createElement("div",{className:"tilty-glare-wrapper",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{className:"tilty-glare",style:a({},y,N)})),L)}export default c;
//# sourceMappingURL=react-tilty.modern.js.map
