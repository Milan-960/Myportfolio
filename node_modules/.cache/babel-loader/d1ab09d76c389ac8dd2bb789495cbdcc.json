{"ast":null,"code":"import e, { PureComponent as t } from \"react\";\n\nvar n = function (e, t) {\n  return (n = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (e, t) {\n    e.__proto__ = t;\n  } || function (e, t) {\n    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n  })(e, t);\n};\n\nvar i = function () {\n  return (i = Object.assign || function (e) {\n    for (var t, n = 1, i = arguments.length; n < i; n++) for (var r in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);\n\n    return e;\n  }).apply(this, arguments);\n};\n\nfunction r(e, t, n, i) {\n  return new (n || (n = Promise))(function (r, a) {\n    function o(e) {\n      try {\n        s(i.next(e));\n      } catch (e) {\n        a(e);\n      }\n    }\n\n    function l(e) {\n      try {\n        s(i.throw(e));\n      } catch (e) {\n        a(e);\n      }\n    }\n\n    function s(e) {\n      var t;\n      e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n        e(t);\n      })).then(o, l);\n    }\n\n    s((i = i.apply(e, t || [])).next());\n  });\n}\n\nfunction a(e, t) {\n  var n,\n      i,\n      r,\n      a,\n      o = {\n    label: 0,\n    sent: function () {\n      if (1 & r[0]) throw r[1];\n      return r[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return a = {\n    next: l(0),\n    throw: l(1),\n    return: l(2)\n  }, \"function\" == typeof Symbol && (a[Symbol.iterator] = function () {\n    return this;\n  }), a;\n\n  function l(a) {\n    return function (l) {\n      return function (a) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; o;) try {\n          if (n = 1, i && (r = 2 & a[0] ? i.return : a[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, a[1])).done) return r;\n\n          switch (i = 0, r && (a = [2 & a[0], r.value]), a[0]) {\n            case 0:\n            case 1:\n              r = a;\n              break;\n\n            case 4:\n              return o.label++, {\n                value: a[1],\n                done: !1\n              };\n\n            case 5:\n              o.label++, i = a[1], a = [0];\n              continue;\n\n            case 7:\n              a = o.ops.pop(), o.trys.pop();\n              continue;\n\n            default:\n              if (!(r = o.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== a[0] && 2 !== a[0])) {\n                o = 0;\n                continue;\n              }\n\n              if (3 === a[0] && (!r || a[1] > r[0] && a[1] < r[3])) {\n                o.label = a[1];\n                break;\n              }\n\n              if (6 === a[0] && o.label < r[1]) {\n                o.label = r[1], r = a;\n                break;\n              }\n\n              if (r && o.label < r[2]) {\n                o.label = r[2], o.ops.push(a);\n                break;\n              }\n\n              r[2] && o.ops.pop(), o.trys.pop();\n              continue;\n          }\n\n          a = t.call(e, o);\n        } catch (e) {\n          a = [6, e], i = 0;\n        } finally {\n          n = r = 0;\n        }\n\n        if (5 & a[0]) throw a[1];\n        return {\n          value: a[0] ? a[1] : void 0,\n          done: !0\n        };\n      }([a, l]);\n    };\n  }\n}\n\nfunction o(e, t, n, i) {\n  e.style.transition = t + \" \" + n + \"ms \" + i;\n}\n\nfunction l(e, t, n) {\n  return Math.min(Math.max(e, t), n);\n}\n\nvar s = function (e, t) {\n  var n = this;\n  this.glareAngle = 0, this.glareOpacity = 0, this.calculateGlareSize = function (e) {\n    var t = e.height,\n        n = Math.sqrt(Math.pow(e.width, 2) + Math.pow(t, 2));\n    return {\n      width: n,\n      height: n\n    };\n  }, this.setSize = function (e) {\n    var t = n.calculateGlareSize(e);\n    n.glareEl.style.width = t.width + \"px\", n.glareEl.style.height = t.height + \"px\";\n  }, this.update = function (e, t, i, r) {\n    n.updateAngle(e, t.glareReverse), n.updateOpacity(e, t, i, r);\n  }, this.updateAngle = function (e, t) {\n    var i = e.xPercentage,\n        r = 180 / Math.PI,\n        a = i ? Math.atan2(e.yPercentage, -i) * r : 0;\n    n.glareAngle = a - (t ? 180 : 0);\n  }, this.updateOpacity = function (e, t, i, r) {\n    var a,\n        o = e.xPercentage,\n        s = e.yPercentage,\n        p = t.glareMaxOpacity,\n        c = i ? -1 : 1,\n        u = r ? -1 : 1,\n        g = t.glareReverse ? -1 : 1;\n\n    switch (t.glarePosition) {\n      case \"top\":\n        a = -o * c * g;\n        break;\n\n      case \"right\":\n        a = s * u * g;\n        break;\n\n      case \"bottom\":\n        a = o * c * g;\n        break;\n\n      case \"left\":\n        a = -s * u * g;\n        break;\n\n      case \"all\":\n        a = Math.hypot(o, s);\n        break;\n\n      default:\n        a = o * c * g;\n    }\n\n    var h = l(a, 0, 100);\n    n.glareOpacity = h * p / 100;\n  }, this.render = function (e) {\n    var t = e.glareColor;\n    n.glareEl.style.transform = \"rotate(\" + n.glareAngle + \"deg) translate(-50%, -50%)\", n.glareEl.style.opacity = n.glareOpacity.toString(), n.glareEl.style.background = \"linear-gradient(0deg, rgba(255,255,255,0) 0%, \" + t + \" 100%)\";\n  }, this.glareWrapperEl = document.createElement(\"div\"), this.glareEl = document.createElement(\"div\"), this.glareWrapperEl.appendChild(this.glareEl), this.glareWrapperEl.className = \"glare-wrapper\", this.glareEl.className = \"glare\";\n  var i = {\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    overflow: \"hidden\",\n    borderRadius: t,\n    WebkitMaskImage: \"-webkit-radial-gradient(white, black)\"\n  },\n      r = this.calculateGlareSize(e),\n      a = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transformOrigin: \"0% 0%\",\n    pointerEvents: \"none\",\n    width: r.width + \"px\",\n    height: r.height + \"px\"\n  };\n  Object.assign(this.glareWrapperEl.style, i), Object.assign(this.glareEl.style, a);\n},\n    p = function () {\n  var e = this;\n  this.glareAngle = 0, this.glareOpacity = 0, this.tiltAngleX = 0, this.tiltAngleY = 0, this.tiltAngleXPercentage = 0, this.tiltAngleYPercentage = 0, this.update = function (t, n) {\n    e.updateTilt(t, n), e.updateTiltManualInput(t, n), e.updateTiltReverse(n), e.updateTiltLimits(n);\n  }, this.updateTilt = function (t, n) {\n    var i = t.yPercentage,\n        r = n.tiltMaxAngleY;\n    e.tiltAngleX = t.xPercentage * n.tiltMaxAngleX / 100, e.tiltAngleY = i * r / 100 * -1;\n  }, this.updateTiltManualInput = function (t, n) {\n    var i = n.tiltAngleXManual,\n        r = n.tiltAngleYManual,\n        a = n.tiltMaxAngleX,\n        o = n.tiltMaxAngleY;\n    (null !== i || null !== r) && (e.tiltAngleX = null !== i ? i : 0, e.tiltAngleY = null !== r ? r : 0, t.xPercentage = 100 * e.tiltAngleX / a, t.yPercentage = 100 * e.tiltAngleY / o);\n  }, this.updateTiltReverse = function (t) {\n    var n = t.tiltReverse ? -1 : 1;\n    e.tiltAngleX = n * e.tiltAngleX, e.tiltAngleY = n * e.tiltAngleY;\n  }, this.updateTiltLimits = function (t) {\n    var n = t.tiltAxis;\n    e.tiltAngleX = l(e.tiltAngleX, -90, 90), e.tiltAngleY = l(e.tiltAngleY, -90, 90), n && (e.tiltAngleX = \"x\" === n ? e.tiltAngleX : 0, e.tiltAngleY = \"y\" === n ? e.tiltAngleY : 0);\n  }, this.updateTiltAnglesPercentage = function (t) {\n    var n = t.tiltMaxAngleY;\n    e.tiltAngleXPercentage = e.tiltAngleX / t.tiltMaxAngleX * 100, e.tiltAngleYPercentage = e.tiltAngleY / n * 100;\n  }, this.render = function (t) {\n    t.style.transform += \"rotateX(\" + e.tiltAngleX + \"deg) rotateY(\" + e.tiltAngleY + \"deg) \";\n  };\n},\n    c = i(i({\n  scale: 1,\n  perspective: 1e3,\n  flipVertically: !1,\n  flipHorizontally: !1,\n  reset: !0,\n  transitionEasing: \"cubic-bezier(.03,.98,.52,.99)\",\n  transitionSpeed: 400,\n  trackOnWindow: !1,\n  gyroscope: !1\n}, {\n  tiltEnable: !0,\n  tiltReverse: !1,\n  tiltAngleXInitial: 0,\n  tiltAngleYInitial: 0,\n  tiltMaxAngleX: 20,\n  tiltMaxAngleY: 20,\n  tiltAxis: null,\n  tiltAngleXManual: null,\n  tiltAngleYManual: null\n}), {\n  glareEnable: !1,\n  glareMaxOpacity: .7,\n  glareColor: \"#ffffff\",\n  glarePosition: \"bottom\",\n  glareReverse: !1,\n  glareBorderRadius: \"0\"\n}),\n    u = function (t) {\n  function i() {\n    var e = null !== t && t.apply(this, arguments) || this;\n    return e.wrapperEl = {\n      node: null,\n      size: {\n        width: 0,\n        height: 0,\n        left: 0,\n        top: 0\n      },\n      clientPosition: {\n        x: null,\n        y: null,\n        xPercentage: 0,\n        yPercentage: 0\n      },\n      updateAnimationId: null,\n      scale: 1\n    }, e.tilt = null, e.glare = null, e.addDeviceOrientationEventListener = function () {\n      return r(e, void 0, void 0, function () {\n        var e;\n        return a(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!window.DeviceOrientationEvent && \"development\" === process.env.NODE_ENV) return console.warn(\"Browser doesn't support Device Orientation.\"), [2];\n              if (!(\"function\" == typeof DeviceMotionEvent.requestPermission)) return [3, 4];\n              t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 3,, 4]), [4, DeviceOrientationEvent.requestPermission()];\n\n            case 2:\n              return \"granted\" === t.sent() && window.addEventListener(\"deviceorientation\", this.onMove), [2];\n\n            case 3:\n              return e = t.sent(), console.error(e), [2];\n\n            case 4:\n              return window.addEventListener(\"deviceorientation\", this.onMove), [2];\n          }\n        });\n      });\n    }, e.setSize = function () {\n      e.setWrapperElSize(), e.glare && e.glare.setSize(e.wrapperEl.size);\n    }, e.mainLoop = function (t) {\n      null !== e.wrapperEl.updateAnimationId && cancelAnimationFrame(e.wrapperEl.updateAnimationId), e.processInput(t), e.update(t.type), e.wrapperEl.updateAnimationId = requestAnimationFrame(e.renderFrame);\n    }, e.onEnter = function (t) {\n      var n = e.props.onEnter;\n      e.setSize(), e.wrapperEl.node.style.willChange = \"transform\", e.setTransitions(), n && n(t.type);\n    }, e.onMove = function (t) {\n      e.mainLoop(t), e.emitOnMove(t);\n    }, e.onLeave = function (t) {\n      var n = e.props.onLeave;\n\n      if (e.setTransitions(), n && n(t.type), e.props.reset) {\n        var i = new CustomEvent(\"autoreset\");\n        e.onMove(i);\n      }\n    }, e.processInput = function (t) {\n      var n = e.props.scale;\n\n      switch (t.type) {\n        case \"mousemove\":\n          e.wrapperEl.clientPosition.x = t.pageX, e.wrapperEl.clientPosition.y = t.pageY, e.wrapperEl.scale = n;\n          break;\n\n        case \"touchmove\":\n          e.wrapperEl.clientPosition.x = t.touches[0].pageX, e.wrapperEl.clientPosition.y = t.touches[0].pageY, e.wrapperEl.scale = n;\n          break;\n\n        case \"deviceorientation\":\n          e.processInputDeviceOrientation(t), e.wrapperEl.scale = n;\n          break;\n\n        case \"autoreset\":\n          var i = e.props,\n              r = i.tiltAngleYInitial / i.tiltMaxAngleY * 100;\n          e.wrapperEl.clientPosition.xPercentage = l(i.tiltAngleXInitial / i.tiltMaxAngleX * 100, -100, 100), e.wrapperEl.clientPosition.yPercentage = l(r, -100, 100), e.wrapperEl.scale = 1;\n      }\n    }, e.processInputDeviceOrientation = function (t) {\n      if (t.gamma && t.beta && e.props.gyroscope) {\n        var n = e.props,\n            i = n.tiltMaxAngleY,\n            r = t.gamma;\n        e.wrapperEl.clientPosition.xPercentage = t.beta / n.tiltMaxAngleX * 100, e.wrapperEl.clientPosition.yPercentage = r / i * 100, e.wrapperEl.clientPosition.xPercentage = l(e.wrapperEl.clientPosition.xPercentage, -100, 100), e.wrapperEl.clientPosition.yPercentage = l(e.wrapperEl.clientPosition.yPercentage, -100, 100);\n      }\n    }, e.update = function (t) {\n      var n = e.props,\n          i = n.tiltEnable,\n          r = n.flipVertically,\n          a = n.flipHorizontally;\n      \"autoreset\" !== t && \"deviceorientation\" !== t && \"propChanged\" !== t && e.updateClientInput(), i && e.tilt.update(e.wrapperEl.clientPosition, e.props), e.updateFlip(), e.tilt.updateTiltAnglesPercentage(e.props), e.glare && e.glare.update(e.wrapperEl.clientPosition, e.props, r, a);\n    }, e.updateClientInput = function () {\n      var t, n;\n\n      if (e.props.trackOnWindow) {\n        var i = e.wrapperEl.clientPosition,\n            r = i.x;\n        t = i.y / window.innerHeight * 200 - 100, n = r / window.innerWidth * 200 - 100;\n      } else {\n        var a = e.wrapperEl,\n            o = a.size,\n            s = a.clientPosition;\n        t = (s.y - o.top) / o.height * 200 - 100, n = ((r = s.x) - o.left) / o.width * 200 - 100;\n      }\n\n      e.wrapperEl.clientPosition.xPercentage = l(t, -100, 100), e.wrapperEl.clientPosition.yPercentage = l(n, -100, 100);\n    }, e.updateFlip = function () {\n      var t = e.props,\n          n = t.flipHorizontally;\n      t.flipVertically && (e.tilt.tiltAngleX += 180, e.tilt.tiltAngleY *= -1), n && (e.tilt.tiltAngleY += 180);\n    }, e.renderFrame = function () {\n      e.resetWrapperElTransform(), e.renderPerspective(), e.tilt.render(e.wrapperEl.node), e.renderScale(), e.glare && e.glare.render(e.props);\n    }, e;\n  }\n\n  return function (e, t) {\n    if (\"function\" != typeof t && null !== t) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n\n    function i() {\n      this.constructor = e;\n    }\n\n    n(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n  }(i, t), i.prototype.componentDidMount = function () {\n    this.tilt = new p(), this.initGlare(), this.addEventListeners();\n    var e = new CustomEvent(\"autoreset\");\n    this.mainLoop(e);\n    var t = new CustomEvent(\"initial\");\n    this.emitOnMove(t);\n  }, i.prototype.componentWillUnmount = function () {\n    null !== this.wrapperEl.updateAnimationId && cancelAnimationFrame(this.wrapperEl.updateAnimationId), this.removeEventListeners();\n  }, i.prototype.componentDidUpdate = function () {\n    var e = new CustomEvent(\"propChanged\");\n    this.mainLoop(e);\n  }, i.prototype.addEventListeners = function () {\n    var e = this.props,\n        t = e.trackOnWindow,\n        n = e.gyroscope;\n    window.addEventListener(\"resize\", this.setSize), t && (window.addEventListener(\"mouseenter\", this.onEnter), window.addEventListener(\"mousemove\", this.onMove), window.addEventListener(\"mouseout\", this.onLeave), window.addEventListener(\"touchstart\", this.onEnter), window.addEventListener(\"touchmove\", this.onMove), window.addEventListener(\"touchend\", this.onLeave)), n && this.addDeviceOrientationEventListener();\n  }, i.prototype.removeEventListeners = function () {\n    var e = this.props,\n        t = e.trackOnWindow,\n        n = e.gyroscope;\n    window.removeEventListener(\"resize\", this.setSize), t && (window.removeEventListener(\"mouseenter\", this.onEnter), window.removeEventListener(\"mousemove\", this.onMove), window.removeEventListener(\"mouseout\", this.onLeave), window.removeEventListener(\"touchstart\", this.onEnter), window.removeEventListener(\"touchmove\", this.onMove), window.removeEventListener(\"touchend\", this.onLeave)), n && window.DeviceOrientationEvent && window.removeEventListener(\"deviceorientation\", this.onMove);\n  }, i.prototype.setWrapperElSize = function () {\n    var e = this.wrapperEl.node.getBoundingClientRect();\n    this.wrapperEl.size.width = this.wrapperEl.node.offsetWidth, this.wrapperEl.size.height = this.wrapperEl.node.offsetHeight, this.wrapperEl.size.left = e.left + window.scrollX, this.wrapperEl.size.top = e.top + window.scrollY;\n  }, i.prototype.initGlare = function () {\n    var e = this.props;\n    e.glareEnable && (this.glare = new s(this.wrapperEl.size, e.glareBorderRadius), this.wrapperEl.node.appendChild(this.glare.glareWrapperEl));\n  }, i.prototype.emitOnMove = function (e) {\n    var t = this.props.onMove;\n\n    if (t) {\n      var n = 0,\n          i = 0;\n      this.glare && (n = this.glare.glareAngle, i = this.glare.glareOpacity), t(this.tilt.tiltAngleX, this.tilt.tiltAngleY, this.tilt.tiltAngleXPercentage, this.tilt.tiltAngleYPercentage, n, i, e.type);\n    }\n  }, i.prototype.resetWrapperElTransform = function () {\n    this.wrapperEl.node.style.transform = \"\";\n  }, i.prototype.renderPerspective = function () {\n    this.wrapperEl.node.style.transform += \"perspective(\" + this.props.perspective + \"px) \";\n  }, i.prototype.renderScale = function () {\n    var e = this.wrapperEl.scale;\n    this.wrapperEl.node.style.transform += \"scale3d(\" + e + \",\" + e + \",\" + e + \")\";\n  }, i.prototype.setTransitions = function () {\n    var e = this.props,\n        t = e.transitionSpeed,\n        n = e.transitionEasing;\n    o(this.wrapperEl.node, \"all\", t, n), this.glare && o(this.glare.glareEl, \"opacity\", t, n);\n  }, i.prototype.render = function () {\n    var t = this,\n        n = this.props;\n    return e.createElement(\"div\", {\n      ref: function (e) {\n        return t.wrapperEl.node = e;\n      },\n      onMouseEnter: this.onEnter,\n      onMouseMove: this.onMove,\n      onMouseLeave: this.onLeave,\n      onTouchStart: this.onEnter,\n      onTouchMove: this.onMove,\n      onTouchEnd: this.onLeave,\n      className: n.className,\n      style: n.style\n    }, n.children);\n  }, i.defaultProps = c, i;\n}(t);\n\nexport default u;","map":{"version":3,"sources":["../src/common/utils.ts","../src/features/glare/Glare.ts","../src/features/tilt/Tilt.ts","../src/react-parallax-tilt/defaultProps.ts","../src/react-parallax-tilt/ReactParallaxTilt.tsx"],"names":["setTransition","element","property","duration","timing","style","transition","constrainToRange","value","rangeMin","rangeMax","Math","min","max","this","wrapperElSize","glareBorderRadius","glareWrapperEl","document","createElement","glareEl","appendChild","className","styleGlareWrapper","position","top","left","width","height","overflow","borderRadius","WebkitMaskImage","glareSize","calculateGlareSize","styleGlare","transformOrigin","pointerEvents","Object","assign","h","wrapperElDiagonal","sqrt","_this","wrapperElClientPosition","props","flipVertically","flipHorizontally","updateAngle","glareReverse","updateOpacity","rad2Deg","PI","glareAngle","xPercentage","atan2","yPercentage","glareMaxOpacity","flipVerticallyFactor","flipHorizontallyFactor","glareReverseFactor","glareOpacityFactor","hypot","glareOpacityFactorRemoveNegative","glareOpacity","transform","opacity","toString","background","glareColor","updateTilt","updateTiltManualInput","updateTiltReverse","updateTiltLimits","tiltMaxAngleY","tiltAngleX","tiltAngleY","tiltAngleYManual","tiltMaxAngleX","tiltAngleXManual","tiltReverse","tiltAxis","tiltAngleXPercentage","tiltAngleYPercentage","glareEnable","glarePosition","tiltEnable","tiltAngleXInitial","tiltAngleYInitial","defaultProps","scale","perspective","reset","transitionEasing","transitionSpeed","trackOnWindow","gyroscope","__extends","ReactParallaxTilt","node","size","clientPosition","x","y","updateAnimationId","tilt","Tilt","initGlare","addEventListeners","autoreset","CustomEvent","mainLoop","initialEvent","emitOnMove","wrapperEl","cancelAnimationFrame","removeEventListeners","eventType","window","addEventListener","setSize","onEnter","onMove","onLeave","addDeviceOrientationEventListener","DeviceOrientationEvent","process","env","NODE_ENV","console","warn","DeviceMotionEvent","requestPermission","error","err_1","removeEventListener","setWrapperElSize","glare","rect","getBoundingClientRect","offsetWidth","offsetHeight","scrollX","scrollY","Glare","event","processInput","update","type","requestAnimationFrame","renderFrame","willChange","setTransitions","autoResetEvent","pageX","pageY","touches","processInputDeviceOrientation","gamma","beta","angleY","updateClientInput","updateFlip","updateTiltAnglesPercentage","xTemp","yTemp","innerHeight","innerWidth","_c","_d","resetWrapperElTransform","renderPerspective","render","renderScale","_a","React","ref","el","onMouseEnter","onMouseMove","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd"],"mappings":"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","sourcesContent":["export function setTransition<T extends HTMLElement>(\n  element: T,\n  property: 'all' | 'opacity',\n  duration: number,\n  timing: string,\n): void {\n  element.style.transition = `${property} ${duration}ms ${timing}`;\n}\n\nexport function constrainToRange(value: number, rangeMin: number, rangeMax: number): number {\n  return Math.min(Math.max(value, rangeMin), rangeMax);\n}\n","import { CSSProperties } from 'react';\n\nimport { ElementSizePosition, ClientPosition, IStyle } from '../../common/types';\nimport { constrainToRange } from '../../common/utils';\n\nimport { GlareProps, GlareSize } from './types';\n\nexport class Glare implements IStyle {\n  public glareWrapperEl: HTMLDivElement;\n  public glareEl: HTMLDivElement;\n\n  public glareAngle = 0;\n  public glareOpacity = 0;\n\n  constructor(wrapperElSize: ElementSizePosition, glareBorderRadius: string) {\n    this.glareWrapperEl = document.createElement('div');\n    this.glareEl = document.createElement('div');\n    this.glareWrapperEl.appendChild(this.glareEl);\n    this.glareWrapperEl.className = 'glare-wrapper';\n    this.glareEl.className = 'glare';\n\n    const styleGlareWrapper: CSSProperties = {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      borderRadius: glareBorderRadius,\n      // Safari border-radius https://github.com/mkosir/react-parallax-tilt/issues/27#issuecomment-809884059\n      WebkitMaskImage: '-webkit-radial-gradient(white, black)',\n    };\n\n    const glareSize = this.calculateGlareSize(wrapperElSize);\n    const styleGlare: CSSProperties = {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '0% 0%',\n      pointerEvents: 'none',\n      width: `${glareSize.width}px`,\n      height: `${glareSize.height}px`,\n    };\n\n    Object.assign(this.glareWrapperEl.style, styleGlareWrapper);\n    Object.assign(this.glareEl.style, styleGlare);\n  }\n\n  private calculateGlareSize = (wrapperElSize: ElementSizePosition): GlareSize => {\n    const { width: w, height: h } = wrapperElSize;\n    const wrapperElDiagonal = Math.sqrt(w! ** 2 + h! ** 2);\n    return {\n      width: wrapperElDiagonal,\n      height: wrapperElDiagonal,\n    };\n  };\n\n  public setSize = (wrapperElSize: ElementSizePosition): void => {\n    const glareSize = this.calculateGlareSize(wrapperElSize);\n    this.glareEl.style.width = `${glareSize.width}px`;\n    this.glareEl.style.height = `${glareSize.height}px`;\n  };\n\n  public update = (\n    wrapperElClientPosition: ClientPosition,\n    props: GlareProps,\n    flipVertically: boolean,\n    flipHorizontally: boolean,\n  ): void => {\n    this.updateAngle(wrapperElClientPosition, props.glareReverse!);\n    this.updateOpacity(wrapperElClientPosition, props, flipVertically, flipHorizontally);\n  };\n\n  private updateAngle = (wrapperElClientPosition: ClientPosition, glareReverse: boolean): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n\n    const rad2Deg = 180 / Math.PI;\n    // top 0°, right +90°, bottom -+180°, left -90°\n    const glareAngle = xPercentage ? Math.atan2(yPercentage, -xPercentage) * rad2Deg : 0;\n\n    const addGlareAngle = glareReverse ? 180 : 0;\n    this.glareAngle = glareAngle - addGlareAngle;\n  };\n\n  private updateOpacity = (\n    wrapperElClientPosition: ClientPosition,\n    props: GlareProps,\n    flipVertically: boolean,\n    flipHorizontally: boolean,\n  ): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n    const { glarePosition, glareReverse, glareMaxOpacity } = props;\n\n    const flipVerticallyFactor = flipVertically ? -1 : 1;\n    const flipHorizontallyFactor = flipHorizontally ? -1 : 1;\n    const glareReverseFactor = glareReverse ? -1 : 1;\n\n    let glareOpacityFactor: number;\n    switch (glarePosition) {\n      case 'top':\n        glareOpacityFactor = -xPercentage! * flipVerticallyFactor * glareReverseFactor;\n        break;\n      case 'right':\n        glareOpacityFactor = yPercentage! * flipHorizontallyFactor * glareReverseFactor;\n        break;\n      case 'bottom':\n        glareOpacityFactor = xPercentage! * flipVerticallyFactor * glareReverseFactor;\n        break;\n      case 'left':\n        glareOpacityFactor = -yPercentage! * flipHorizontallyFactor * glareReverseFactor;\n        break;\n      case 'all':\n        glareOpacityFactor = Math.hypot(xPercentage, yPercentage);\n        break;\n      default:\n        glareOpacityFactor = xPercentage! * flipVerticallyFactor * glareReverseFactor;\n    }\n\n    const glareOpacityFactorRemoveNegative = constrainToRange(glareOpacityFactor, 0, 100);\n    this.glareOpacity = (glareOpacityFactorRemoveNegative * glareMaxOpacity!) / 100;\n  };\n\n  public render = (props: GlareProps): void => {\n    const { glareColor } = props;\n    this.glareEl.style.transform = `rotate(${this.glareAngle}deg) translate(-50%, -50%)`;\n    this.glareEl.style.opacity = this.glareOpacity.toString();\n    this.glareEl.style.background = `linear-gradient(0deg, rgba(255,255,255,0) 0%, ${glareColor} 100%)`;\n  };\n}\n","import { ClientPosition, IStyle } from '../../common/types';\nimport { constrainToRange } from '../../common/utils';\n\nimport { TiltProps } from './types';\n\nconst TILT_ANGLE_CONSTRAINT = 90;\n\nexport class Tilt<T extends HTMLElement> implements IStyle {\n  public glareAngle = 0;\n  public glareOpacity = 0;\n\n  public tiltAngleX = 0;\n  public tiltAngleY = 0;\n  public tiltAngleXPercentage = 0;\n  public tiltAngleYPercentage = 0;\n\n  public update = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    this.updateTilt(wrapperElClientPosition, props);\n    this.updateTiltManualInput(wrapperElClientPosition, props);\n    this.updateTiltReverse(props);\n    this.updateTiltLimits(props);\n  };\n\n  private updateTilt = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n    const { tiltMaxAngleX, tiltMaxAngleY } = props;\n\n    const tiltTowardMouse = -1;\n    this.tiltAngleX = (xPercentage! * tiltMaxAngleX!) / 100;\n    this.tiltAngleY = ((yPercentage! * tiltMaxAngleY!) / 100) * tiltTowardMouse;\n  };\n\n  private updateTiltManualInput = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    const { tiltAngleXManual, tiltAngleYManual, tiltMaxAngleX, tiltMaxAngleY } = props;\n\n    const isManualInputIgnoreOtherInputs = tiltAngleXManual !== null || tiltAngleYManual !== null;\n    if (isManualInputIgnoreOtherInputs) {\n      this.tiltAngleX = tiltAngleXManual !== null ? tiltAngleXManual! : 0;\n      this.tiltAngleY = tiltAngleYManual !== null ? tiltAngleYManual! : 0;\n      wrapperElClientPosition.xPercentage = (100 * this.tiltAngleX) / tiltMaxAngleX!;\n      wrapperElClientPosition.yPercentage = (100 * this.tiltAngleY) / tiltMaxAngleY!;\n    }\n  };\n\n  private updateTiltReverse = (props: TiltProps): void => {\n    const tiltReverse = props.tiltReverse ? -1 : 1;\n    this.tiltAngleX = tiltReverse * this.tiltAngleX;\n    this.tiltAngleY = tiltReverse * this.tiltAngleY;\n  };\n\n  private updateTiltLimits = (props: TiltProps): void => {\n    const { tiltAxis } = props;\n\n    this.tiltAngleX = constrainToRange(this.tiltAngleX, -TILT_ANGLE_CONSTRAINT, TILT_ANGLE_CONSTRAINT);\n    this.tiltAngleY = constrainToRange(this.tiltAngleY, -TILT_ANGLE_CONSTRAINT, TILT_ANGLE_CONSTRAINT);\n\n    const isOnlyOneAxisEnabledForTilting = tiltAxis;\n    if (isOnlyOneAxisEnabledForTilting) {\n      this.tiltAngleX = tiltAxis === 'x' ? this.tiltAngleX : 0;\n      this.tiltAngleY = tiltAxis === 'y' ? this.tiltAngleY : 0;\n    }\n  };\n\n  public updateTiltAnglesPercentage = (props: TiltProps): void => {\n    const { tiltMaxAngleX, tiltMaxAngleY } = props;\n\n    this.tiltAngleXPercentage = (this.tiltAngleX / tiltMaxAngleX!) * 100;\n    this.tiltAngleYPercentage = (this.tiltAngleY / tiltMaxAngleY!) * 100;\n  };\n\n  public render = (element: T): void => {\n    element.style.transform += `rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `;\n  };\n}\n","import { GlareProps } from '../features/glare/types';\nimport { TiltProps } from '../features/tilt/types';\n\nimport { Props } from './types';\n\nconst defaultGlareProps: GlareProps = {\n  glareEnable: false,\n  glareMaxOpacity: 0.7,\n  glareColor: '#ffffff',\n  glarePosition: 'bottom',\n  glareReverse: false,\n  glareBorderRadius: '0',\n};\n\nconst defaultTiltProps: TiltProps = {\n  tiltEnable: true,\n  tiltReverse: false,\n  tiltAngleXInitial: 0,\n  tiltAngleYInitial: 0,\n  tiltMaxAngleX: 20,\n  tiltMaxAngleY: 20,\n  tiltAxis: null,\n  tiltAngleXManual: null,\n  tiltAngleYManual: null,\n};\n\nexport const defaultProps: Props = {\n  scale: 1,\n  perspective: 1000,\n  flipVertically: false,\n  flipHorizontally: false,\n  reset: true,\n  transitionEasing: 'cubic-bezier(.03,.98,.52,.99)',\n  transitionSpeed: 400,\n  trackOnWindow: false,\n  gyroscope: false,\n  ...defaultTiltProps,\n  ...defaultGlareProps,\n};\n","import React, { PureComponent, MouseEvent, TouchEvent } from 'react';\n\nimport { setTransition, constrainToRange } from '../common/utils';\nimport { Glare } from '../features/glare/Glare';\nimport { Tilt } from '../features/tilt/Tilt';\n\nimport { defaultProps } from './defaultProps';\nimport { Props, SupportedEvent, EventType, CustomEventType, WrapperElement } from './types';\n\nclass ReactParallaxTilt extends PureComponent<Props> {\n  public static defaultProps = defaultProps;\n  private wrapperEl: WrapperElement<HTMLDivElement> = {\n    node: null,\n    size: {\n      width: 0,\n      height: 0,\n      left: 0,\n      top: 0,\n    },\n    clientPosition: {\n      x: null,\n      y: null,\n      xPercentage: 0,\n      yPercentage: 0,\n    },\n    updateAnimationId: null,\n    scale: 1,\n  };\n  private tilt: Tilt<HTMLDivElement> | null = null;\n  private glare: Glare | null = null;\n\n  public componentDidMount() {\n    this.tilt = new Tilt<HTMLDivElement>();\n    this.initGlare();\n    this.addEventListeners();\n    const autoreset = new CustomEvent<CustomEventType>('autoreset' as CustomEventType);\n    this.mainLoop(autoreset);\n    const initialEvent = new CustomEvent<CustomEventType>('initial' as CustomEventType);\n    this.emitOnMove(initialEvent);\n  }\n\n  public componentWillUnmount() {\n    if (this.wrapperEl.updateAnimationId !== null) {\n      cancelAnimationFrame(this.wrapperEl.updateAnimationId);\n    }\n    this.removeEventListeners();\n  }\n\n  public componentDidUpdate() {\n    const eventType = new CustomEvent<CustomEventType>('propChanged' as CustomEventType);\n    this.mainLoop(eventType);\n  }\n\n  private addEventListeners() {\n    const { trackOnWindow, gyroscope } = this.props;\n\n    window.addEventListener('resize', this.setSize);\n\n    if (trackOnWindow) {\n      window.addEventListener('mouseenter', this.onEnter);\n      window.addEventListener('mousemove', this.onMove);\n      window.addEventListener('mouseout', this.onLeave);\n      window.addEventListener('touchstart', this.onEnter);\n      window.addEventListener('touchmove', this.onMove);\n      window.addEventListener('touchend', this.onLeave);\n    }\n\n    if (gyroscope) {\n      this.addDeviceOrientationEventListener();\n    }\n  }\n\n  /* istanbul ignore next */\n  private addDeviceOrientationEventListener = async () => {\n    if (!window.DeviceOrientationEvent && process.env.NODE_ENV === 'development') {\n      console.warn(\"Browser doesn't support Device Orientation.\");\n      return;\n    }\n\n    const iOS13OrHigherDevice = typeof DeviceMotionEvent.requestPermission === 'function';\n    if (iOS13OrHigherDevice) {\n      try {\n        const response = await DeviceOrientationEvent.requestPermission();\n        if (response === 'granted') {\n          window.addEventListener('deviceorientation', this.onMove);\n        }\n        return;\n      } catch (err) {\n        console.error(err);\n        return;\n      }\n    }\n\n    window.addEventListener('deviceorientation', this.onMove);\n  };\n\n  private removeEventListeners() {\n    const { trackOnWindow, gyroscope } = this.props;\n\n    window.removeEventListener('resize', this.setSize);\n\n    if (trackOnWindow) {\n      window.removeEventListener('mouseenter', this.onEnter);\n      window.removeEventListener('mousemove', this.onMove);\n      window.removeEventListener('mouseout', this.onLeave);\n      window.removeEventListener('touchstart', this.onEnter);\n      window.removeEventListener('touchmove', this.onMove);\n      window.removeEventListener('touchend', this.onLeave);\n    }\n\n    // jest - instance of DeviceOrientationEvent not possible\n    /* istanbul ignore next */\n    if (gyroscope && window.DeviceOrientationEvent) {\n      window.removeEventListener('deviceorientation', this.onMove);\n    }\n  }\n\n  public setSize = () => {\n    this.setWrapperElSize();\n    if (this.glare) {\n      this.glare.setSize(this.wrapperEl.size);\n    }\n  };\n\n  private setWrapperElSize() {\n    const rect = this.wrapperEl.node!.getBoundingClientRect();\n    this.wrapperEl.size.width = this.wrapperEl.node!.offsetWidth;\n    this.wrapperEl.size.height = this.wrapperEl.node!.offsetHeight;\n    this.wrapperEl.size.left = rect.left + window.scrollX;\n    this.wrapperEl.size.top = rect.top + window.scrollY;\n  }\n\n  private initGlare() {\n    const { glareEnable, glareBorderRadius } = this.props;\n\n    if (!glareEnable) {\n      return;\n    }\n\n    this.glare = new Glare(this.wrapperEl.size, glareBorderRadius);\n    this.wrapperEl.node!.appendChild(this.glare.glareWrapperEl);\n  }\n\n  public mainLoop = (event: SupportedEvent) => {\n    if (this.wrapperEl.updateAnimationId !== null) {\n      cancelAnimationFrame(this.wrapperEl.updateAnimationId);\n    }\n    this.processInput(event);\n    this.update(event.type);\n    this.wrapperEl.updateAnimationId = requestAnimationFrame(this.renderFrame);\n  };\n\n  private onEnter = (event: SupportedEvent) => {\n    const { onEnter } = this.props;\n\n    // Update wrapped tilt component params in case\n    // - it's being manipulated (position, size, etc.) in consumed application\n    // - initial (delayed) images/children load\n    this.setSize();\n\n    // increase performance by notifying browser 'transform' property is just about to get changed\n    this.wrapperEl.node!.style.willChange = 'transform';\n    this.setTransitions();\n\n    if (onEnter) {\n      onEnter(event.type);\n    }\n  };\n\n  private onMove = (event: SupportedEvent): void => {\n    this.mainLoop(event);\n    this.emitOnMove(event);\n  };\n\n  private emitOnMove(event: SupportedEvent) {\n    const { onMove } = this.props;\n    if (!onMove) {\n      return;\n    }\n    let glareAngle = 0;\n    let glareOpacity = 0;\n    if (this.glare) {\n      glareAngle = this.glare.glareAngle;\n      glareOpacity = this.glare.glareOpacity;\n    }\n\n    onMove(\n      this.tilt!.tiltAngleX!,\n      this.tilt!.tiltAngleY!,\n      this.tilt!.tiltAngleXPercentage!,\n      this.tilt!.tiltAngleYPercentage!,\n      glareAngle,\n      glareOpacity,\n      event.type,\n    );\n  }\n\n  private onLeave = (event: SupportedEvent) => {\n    const { onLeave } = this.props;\n    this.setTransitions();\n\n    if (onLeave) {\n      onLeave(event.type);\n    }\n\n    if (this.props.reset) {\n      const autoResetEvent = new CustomEvent<CustomEventType>('autoreset' as CustomEventType);\n      this.onMove(autoResetEvent);\n    }\n  };\n\n  private processInput = (event: SupportedEvent): void => {\n    const { scale } = this.props;\n\n    switch (event.type as EventType) {\n      case 'mousemove':\n        this.wrapperEl.clientPosition.x = (event as MouseEvent).pageX;\n        this.wrapperEl.clientPosition.y = (event as MouseEvent).pageY;\n        this.wrapperEl.scale = scale!;\n        break;\n      case 'touchmove':\n        this.wrapperEl.clientPosition.x = (event as TouchEvent).touches[0].pageX;\n        this.wrapperEl.clientPosition.y = (event as TouchEvent).touches[0].pageY;\n        this.wrapperEl.scale = scale!;\n        break;\n      // jest - instance of DeviceOrientationEvent not possible\n      /* istanbul ignore next */\n      case 'deviceorientation':\n        this.processInputDeviceOrientation(event as DeviceOrientationEvent);\n        this.wrapperEl.scale = scale!;\n        break;\n      case 'autoreset':\n        const { tiltAngleXInitial, tiltAngleYInitial, tiltMaxAngleX, tiltMaxAngleY } = this.props;\n        const xPercentage = (tiltAngleXInitial! / tiltMaxAngleX!) * 100;\n        const yPercentage = (tiltAngleYInitial! / tiltMaxAngleY!) * 100;\n        this.wrapperEl.clientPosition.xPercentage = constrainToRange(xPercentage, -100, 100);\n        this.wrapperEl.clientPosition.yPercentage = constrainToRange(yPercentage, -100, 100);\n        this.wrapperEl.scale = 1;\n        break;\n    }\n  };\n\n  // jest - instance of DeviceOrientationEvent not possible\n  /* istanbul ignore next */\n  private processInputDeviceOrientation = (event: DeviceOrientationEvent): void => {\n    if (!event.gamma || !event.beta || !this.props.gyroscope) {\n      return;\n    }\n\n    const { tiltMaxAngleX, tiltMaxAngleY } = this.props;\n\n    const angleX = event.beta; // motion of the device around the x axis in degree in the range:[-180,180]\n    const angleY = event.gamma; // motion of the device around the y axis in degree in the range:[-90,90]\n\n    this.wrapperEl.clientPosition.xPercentage = (angleX! / tiltMaxAngleX!) * 100;\n    this.wrapperEl.clientPosition.yPercentage = (angleY! / tiltMaxAngleY!) * 100;\n\n    this.wrapperEl.clientPosition.xPercentage = constrainToRange(this.wrapperEl.clientPosition.xPercentage, -100, 100);\n    this.wrapperEl.clientPosition.yPercentage = constrainToRange(this.wrapperEl.clientPosition.yPercentage, -100, 100);\n  };\n\n  private update = (eventType: EventType | string): void => {\n    const { tiltEnable, flipVertically, flipHorizontally } = this.props;\n\n    const isAngleSetToDefaultAlready = eventType !== 'autoreset';\n    const isAngleRetrievedFromGyroscope = eventType !== 'deviceorientation';\n    const isPropChanged = eventType !== 'propChanged';\n    const isUpdateCalculationNeeded = isAngleSetToDefaultAlready && isAngleRetrievedFromGyroscope && isPropChanged;\n    if (isUpdateCalculationNeeded) {\n      this.updateClientInput();\n    }\n\n    if (tiltEnable) {\n      this.tilt!.update(this.wrapperEl.clientPosition, this.props);\n    }\n\n    this.updateFlip();\n\n    this.tilt!.updateTiltAnglesPercentage(this.props);\n\n    if (this.glare) {\n      this.glare.update(this.wrapperEl.clientPosition, this.props, flipVertically!, flipHorizontally!);\n    }\n  };\n\n  private updateClientInput = (): void => {\n    const { trackOnWindow } = this.props;\n\n    let xTemp;\n    let yTemp;\n    if (trackOnWindow) {\n      const { x, y } = this.wrapperEl.clientPosition;\n\n      xTemp = (y! / window.innerHeight) * 200 - 100;\n      yTemp = (x! / window.innerWidth) * 200 - 100;\n    } else {\n      const {\n        size: { width, height, left, top },\n        clientPosition: { x, y },\n      } = this.wrapperEl;\n\n      xTemp = ((y! - top!) / height!) * 200 - 100;\n      yTemp = ((x! - left!) / width!) * 200 - 100;\n    }\n\n    this.wrapperEl.clientPosition.xPercentage = constrainToRange(xTemp, -100, 100);\n    this.wrapperEl.clientPosition.yPercentage = constrainToRange(yTemp, -100, 100);\n  };\n\n  private updateFlip = (): void => {\n    const { flipVertically, flipHorizontally } = this.props;\n\n    if (flipVertically) {\n      this.tilt!.tiltAngleX += 180;\n      this.tilt!.tiltAngleY *= -1;\n    }\n    if (flipHorizontally) {\n      this.tilt!.tiltAngleY += 180;\n    }\n  };\n\n  public renderFrame = (): void => {\n    this.resetWrapperElTransform();\n\n    this.renderPerspective();\n    this.tilt!.render(this.wrapperEl.node!);\n    this.renderScale();\n    if (this.glare) {\n      this.glare.render(this.props);\n    }\n  };\n\n  private resetWrapperElTransform(): void {\n    this.wrapperEl.node!.style.transform = '';\n  }\n\n  private renderPerspective(): void {\n    const { perspective } = this.props;\n\n    this.wrapperEl.node!.style.transform += `perspective(${perspective}px) `;\n  }\n\n  private renderScale(): void {\n    const { scale } = this.wrapperEl;\n\n    this.wrapperEl.node!.style.transform += `scale3d(${scale},${scale},${scale})`;\n  }\n\n  private setTransitions() {\n    const { transitionSpeed, transitionEasing } = this.props;\n    setTransition<HTMLDivElement>(this.wrapperEl.node!, 'all', transitionSpeed!, transitionEasing!);\n\n    if (this.glare) {\n      setTransition<HTMLDivElement>(this.glare.glareEl, 'opacity', transitionSpeed!, transitionEasing!);\n    }\n  }\n\n  public render() {\n    const { children, className, style } = this.props;\n    return (\n      <div\n        ref={(el) => (this.wrapperEl.node = el)}\n        onMouseEnter={this.onEnter}\n        onMouseMove={this.onMove}\n        onMouseLeave={this.onLeave}\n        onTouchStart={this.onEnter}\n        onTouchMove={this.onMove}\n        onTouchEnd={this.onLeave}\n        className={className}\n        style={style}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default ReactParallaxTilt;\n"]},"metadata":{},"sourceType":"module"}